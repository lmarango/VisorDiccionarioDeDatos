--CONSULTA LAS RESTRICCIONES PARA EL USUARIO ACTUAL 
create or replace PROCEDURE CONSRESUSUARIO(O_CURSOR IN OUT SYS_REFCURSOR)
IS
BEGIN
    OPEN O_CURSOR FOR
    SELECT table_name as "Tabla", constraint_name as "Restricion", constraint_type as "Tipo", search_condition_vc "Cond_Busqueda"
    FROM user_constraints;
END;

--CONSULTA EL OBJETO RECIBIDO EN EL PARÁMETRO "pmrObjeto"
CREATE OR REPLACE PROCEDURE CONSOBJUSUARIO(prmObjeto IN VARCHAR, o_cursor OUT SYS_REFCURSOR)
  IS
  BEGIN
    OPEN o_cursor FOR
    SELECT OBJECT_NAME as "Nombre", CREATED as "F_Creación" FROM user_objects WHERE object_type = UPPER(prmobjeto);
  END;
  
--CONSULTA LAS TABLAS DEL USUARIO ACTUAL
CREATE OR REPLACE PROCEDURE CONSTABLAS(O_CURSOR IN OUT SYS_REFCURSOR)
IS
BEGIN
  OPEN O_CURSOR FOR
  SELECT table_name as "T_Nombre" FROM USER_TABLES;
END;

--CONSULTA EL NUMERO DE FILAS PARA UNA TABLA
CREATE OR REPLACE PROCEDURE NUM_ROWS(prmNombre IN VARCHAR, vFilas OUT INTEGER)
IS
BEGIN
    SELECT NUM_ROWS 
    INTO vFilas
    FROM USER_TABLES WHERE table_name = UPPER(prmNombre);
END;

--CONSULTA LA INFORMACION DE LAS COLUMNAS PARA UNA TABLA
CREATE OR REPLACE PROCEDURE INF_COLUMNS (prmTabla in VARCHAR, o_cursor IN OUT SYS_REFCURSOR)
IS
BEGIN
OPEN o_cursor FOR
SELECT column_name as "nom_Columna", data_type as "Tipo Dato", nullable as "Es Nula?"
FROM USER_TAB_COLUMNS WHERE table_name = UPPER (prmTabla);
END;